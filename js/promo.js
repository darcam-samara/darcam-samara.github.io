"use strict";var BeforeAfter=function(){function e(e){this.handler=e,this.checkHandlerExist()&&this.checkImagesExist()&&(this.init(),this.bindEvents())}return e.prototype.init=function(){this.wrapHandler(),this.wrapImages(),this.createHandler()},e.prototype.wrapHandler=function(){var e=this.getHandler().innerHTML,t=document.createElement("div");t.className="before-after",t.innerHTML=e,this.getHandler().innerHTML=t.outerHTML},e.prototype.wrapImages=function(){for(var e=this.getImages(),t=0,r=e.length;t<r;t++)e[t].outerHTML=this.getWrappedImage(e[t].outerHTML,t)},e.prototype.getWrappedImage=function(e,t){var r=document.createElement("div");return r.className="photo",r.innerHTML=e,r.className+=0===t?" before":" after",r.outerHTML},e.prototype.createHandler=function(){var e=this.getHandler().querySelector(".before-after"),t=document.createElement("div");t.className="drag-handler",t.draggable=!0;var r=document.createElement("div");r.className="drag-element",t.appendChild(r),e.innerHTML+=t.outerHTML},e.prototype.checkHandlerExist=function(){return void 0!==this.getHandler()},e.prototype.checkImagesExist=function(){return 2===this.getImages().length},e.prototype.getImages=function(){var e=this.getHandler().querySelectorAll("img");return 0===e.length?this.getHandler().querySelectorAll(".layer"):e},e.prototype.bindEvents=function(){var e=this;this.getDragHandler().addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),e.markDragStart()}),document.addEventListener("mouseup",function(){e.markDragStop()}),this.getContainer().addEventListener("mousemove",function(t){e.isDragStart()&&e.update(t.clientX)})},e.prototype.getHandler=function(){return this.handler},e.prototype.getContainer=function(){return this.getHandler().querySelector(".before-after")},e.prototype.getDragHandler=function(){return this.getHandler().querySelector(".drag-handler")},e.prototype.getDragHandlerOffsetX=function(){return this.getDragHandler().offsetLeft},e.prototype.getPositionByOffset=function(e){var t=100*(e-this.getHandlerOffsetX())/this.getImagesWidth();return t<0?0:t>100?100:t},e.prototype.update=function(e){var t=this.getPositionByOffset(e);this.updateDragHandlerPosition(t),this.updatePhotoBefore(t)},e.prototype.updateDragHandlerPosition=function(e){this.getDragHandler().style.left=e+"%"},e.prototype.updatePhotoBefore=function(e){var t=this.getPhotoBefore(),r=this.getPhotoBeforeImage(),n=100-e;t.style.transform="translate("+-1*n+"%)",r.style.transform="translate("+n+"%)"},e.prototype.getPhotoBefore=function(){return this.getHandler().querySelector(".photo.before")},e.prototype.getPhotoBeforeImage=function(){var e=this.getPhotoBefore().querySelector("img");return null===e?this.getPhotoBefore().querySelector(".layer"):e},e.prototype.getImagesWidth=function(){return this.getHandler().querySelector(".before-after").offsetWidth},e.prototype.getHandlerOffsetX=function(){return this.getHandler().getBoundingClientRect().left},e.prototype.markDragStart=function(){this.dragStart=!0},e.prototype.markDragStop=function(){this.dragStart=!1},e.prototype.isDragStart=function(){return!0===this.dragStart},e}();document.addEventListener("DOMContentLoaded",function(){new BeforeAfter(document.querySelector("#example"))});